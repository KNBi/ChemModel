<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <link rel="stylesheet" type="text/css" href="{% static 'engine/css/previous_results_style.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'engine/css/navbar_style.css' %}">
    <meta charset="UTF-8">
    <title>Previous results</title>
</head>
<body>
    {% csrf_token %}
    <div class="topnav">
      <a href="/">Home</a>
      <a href="/FAQ">FAQ</a>
      {% if request.user.is_authenticated %}
        <a href="/previous_results">Previous results</a>
      {% endif %}
      {% if not request.user.is_authenticated %}
        <a href="/accounts/login">Login</a>
        <a href="/accounts/signup">Sign up</a>
      {% endif %}
      <div class="logout_button">
        {% if request.user.is_authenticated %}
            <form method="post", action="{% url 'accounts:logout' %}">
              {% csrf_token %}
              <button type="submit">Logout</button>
            </form>
        {% endif %}
      </div>
    </div>
    <div>
        {% if request.user.is_authenticated %}
            {% if previous_out %}
                {% if not filtered %}
                    <h2><font color ="white">Your previous search:</font></h2><br>
                    <h3><font color ="white">You can filter your previous search by formula: </font></h3><br>
                    <form method="post">
                        {% csrf_token %}
                        <input type="text" id="formula", name="formula">
                        <button type="submit">Search</button><br>
                    </form>
                    <br>
                {% else %}
                    <h2><font color ="white">Your previous search for {{formula}}:</font></h2><br>
                    <form method="post">
                        {% csrf_token %}
                        <input type="submit" value="Back to all previous results"><br>
                        <br>
                    </form>
                {% endif  %}

                  <table>
                    {%for i in previous_out %}
                      <tr>
                        {% for j in i%}
                          <td><img src="data:image/png;base64,{{j}}"></td>
                        {% endfor %}
                      </tr>
                    {% endfor %}
                  </table>
                {% endif %}
            {% else %}
                <h2><font color ="white">Your don't have any previous results yet!</font></h2><br>
            {% endif %}
    </div>

</body>
</html>